const k=document.querySelector(".js-btn-search"),g=document.querySelector(".js-input"),r=document.querySelector(".js-ul"),a=document.querySelector(".js-ul-fav"),p=document.querySelector(".js-btn-reset"),h=document.querySelector(".js-btn-help"),d=document.querySelector(".js-info");let l=[],n=[];const S=()=>{fetch("https://www.thecocktaildb.com/api/json/v1/1/search.php?s=margarita").then(e=>e.json()).then(e=>{l=e.drinks,i(r,l,!1)})};function j(e,t){let c="";const s=n.findIndex(m=>m.idDrink===e.idDrink);let o=s===-1?"":"fav",v=s===-1?"":'  <div class="close hidden js-close"> x </div>';return c=`    <li class="card ${t===!0?"":"js-item"} ${o} mini" id="${e.idDrink}">
  ${v}
      <p class="title">${e.strDrink}</p>
      <div class="divImg">
      <img class="card--img"
        src="${e.strDrinkThumb}"
        alt="${e.strDrink}"
      />
      </div>
    </li>`,c}function i(e,t,c){e.innerHTML="";for(const o of t)e.innerHTML+=j(o,c);const s=document.querySelectorAll(".js-item");for(const o of s)o.addEventListener("click",I)}function L(e){r.innerHTML="",fetch(`https://www.thecocktaildb.com/api/json/v1/1/search.php?s=${e}`).then(t=>t.json()).then(t=>{l=t.drinks,i(r,l,!1)})}function D(){const e=localStorage.getItem("favourites");e!==null&&(n=JSON.parse(e)),i(a,n,!0)}function b(e){if(e.classList.contains("close")){const t=e.parentElement;console.log("es su parentElement?"),console.log(t.id);const c=t.id,s=n.findIndex(o=>o.idDrink===c);s!==-1&&n.splice(s,1)}}function u(){const e=document.querySelectorAll(".js-close");for(const t of e)t.addEventListener("click",y)}function y(e){console.log("tengo el close?"),console.log(e.target),b(e.target),i(a,n,!0),i(r,l,!1),u()}function I(e){const t=e.currentTarget.id,c=l.find(o=>o.idDrink===t);console.log("selectedCocktail: "),console.log(c);const s=n.findIndex(o=>o.idDrink===t);s===-1?n.push(c):n.splice(s,1),console.log("cocktailsFav: "),console.log(n),i(r,l,!1),i(a,n,!0),u(),localStorage.setItem("favourites",JSON.stringify(n))}const q=e=>{e.preventDefault();const t=g.value;L(t)};k.addEventListener("click",q);const E=e=>{r.innerHTML="",a.innerHTML="",n=[],localStorage.removeItem("favourites")};p.addEventListener("click",E);const f=()=>{d.classList.toggle("hidden")};h.addEventListener("click",f);d.addEventListener("click",f);S();D();
//# sourceMappingURL=main.js.map
